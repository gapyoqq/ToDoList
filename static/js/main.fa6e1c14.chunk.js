(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{116:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=n(8),c=n.n(i);n(88),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(89);var o,l,s=n(25),u=n(159),d=n(151),f=n(68),m=n.n(f),T=r.a.memo((function(t){var e=Object(a.useState)(""),n=Object(s.a)(e,2),i=n[0],c=n[1],o=Object(a.useState)(null),l=Object(s.a)(o,2),f=l[0],T=l[1];return r.a.createElement("div",null,r.a.createElement(u.a,{helperText:f,variant:"outlined",label:"Type value",error:!!f,onKeyPress:function(e){null!==f&&T(null),""!==i.trim()&&"Enter"==e.key&&(t.addItem(i.trim()),c(""))},value:i,onChange:function(t){c(t.currentTarget.value)}}),r.a.createElement(d.a,{color:"primary",onClick:function(){null!==f&&T(null),""!==i.trim()?(t.addItem(i.trim()),c("")):T("Title is required")}},r.a.createElement(m.a,null)))})),b=r.a.memo((function(t){var e=Object(a.useState)(!1),n=Object(s.a)(e,2),i=n[0],c=n[1],o=Object(a.useState)(""),l=Object(s.a)(o,2),d=l[0],f=l[1];return i?r.a.createElement(u.a,{onChange:function(t){return f(t.currentTarget.value)},onBlur:function(){c(!1),t.OnChangeCallback(d)},autoFocus:!0,value:d}):r.a.createElement("span",{onDoubleClick:function(){c(!0),f(t.title)}},t.title)})),O=n(152),E=n(165),k=n(161),p=n(45),v=n.n(p),h=v.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"2ab06da3-ea5f-4726-b6a5-ae0f930da8a3"}});!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(o||(o={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(l||(l={}));var j=function(t){return h.get("todo-lists/".concat(t,"/tasks"))},I=function(t,e){return h.post("todo-lists/".concat(t,"/tasks"),{title:e})},g=function(t,e){return h.delete("todo-lists/".concat(t,"/tasks/").concat(e))},S=function(t,e,n){return h.put("todo-lists/".concat(t,"/tasks/").concat(e),n)},C=r.a.memo((function(t){var e=Object(a.useCallback)((function(e){t.changeTaskTitle(t.task.id,e,t.todoListId)}),[t.task.id,t.changeTaskTitle,t.todoListId]);return r.a.createElement("div",{key:t.task.id,className:t.task.status===o.Completed?"is-done":""},r.a.createElement(k.a,{onChange:function(e){var n=e.currentTarget.checked;t.changeStatus(t.task.id,n?o.Completed:o.New,t.todoListId)},checked:t.task.status===o.Completed}),r.a.createElement(b,{OnChangeCallback:e,title:t.task.title}),r.a.createElement(d.a,{onClick:function(){t.removeTask(t.task.id,t.todoListId)}},r.a.createElement(E.a,null)))})),A=n(32),y=n(12),L={status:"loading",error:null},D=function(t){return{type:"APP/SET-STATUS",status:t}},w={},N=n(18),K=r.a.memo((function(t){var e=Object(N.b)();Object(a.useEffect)((function(){var n;e((n=t.id,function(t){t(D("loading")),j(n).then((function(e){var a=e.data.items;t(function(t,e){return{type:"SET-TASKS",tasks:t,todolistId:e}}(a,n)),t(D("succeeded"))}))}))}),[]);var n=Object(a.useCallback)((function(){t.changeFilter(t.id,"all")}),[t.changeFilter,t.id]),i=Object(a.useCallback)((function(){t.changeFilter(t.id,"active")}),[t.changeFilter,t.id]),c=Object(a.useCallback)((function(){t.changeFilter(t.id,"completed")}),[t.changeFilter,t.id]),l=Object(a.useCallback)((function(e){t.addTask(e,t.id)}),[t.addTask,t.id]),s=Object(a.useCallback)((function(e){t.changeTodolistTitle(t.id,e)}),[t.id,t.changeTodolistTitle]),u=t.tasks;return"active"===t.filter&&(u=t.tasks.filter((function(t){return t.status===o.New}))),"completed"===t.filter&&(u=t.tasks.filter((function(t){return t.status===o.Completed}))),r.a.createElement("div",null,r.a.createElement("h3",null,r.a.createElement(b,{title:t.title,OnChangeCallback:s}),r.a.createElement(d.a,{onClick:function(){t.removeTodolist(t.id)}},r.a.createElement(E.a,null))),r.a.createElement(T,{addItem:l}),u.map((function(e){return r.a.createElement(C,{changeStatus:t.changeStatus,changeTaskTitle:t.changeTaskTitle,removeTask:t.removeTask,task:e,todoListId:t.id,key:e.id})})),r.a.createElement("div",null,r.a.createElement(O.a,{variant:"all"===t.filter?"contained":"text",onClick:n},"All"),r.a.createElement(O.a,{variant:"active"===t.filter?"contained":"text",color:"primary",onClick:i},"Active"),r.a.createElement(O.a,{variant:"completed"===t.filter?"contained":"text",color:"secondary",onClick:c},"Completed")))})),H=n(153),P=n(154),R=n(155),F=n(156),G=n(157),U=n(158),x=n(117),M=n(71),V=n.n(M),B=n(162),J=v.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"2ab06da3-ea5f-4726-b6a5-ae0f930da8a3"}}),W=function(){return J.get("todo-lists")},Y=function(t){return J.post("todo-lists",{title:t})},q=function(t){return J.delete("todo-lists/".concat(t))},$=function(t,e){return J.put("/todo-lists/".concat(t),{title:e})},z=[],Q=function(t){return{type:"ADD-TODOLIST",title:t,todolistId:Object(B.a)()}},X=n(164),Z=n(160);function _(t){return r.a.createElement(Z.a,Object.assign({elevation:6,variant:"filled"},t))}function tt(){var t=Object(N.c)((function(t){return t.app.error})),e=r.a.useState(!0),n=Object(s.a)(e,2),a=(n[0],n[1]),i=function(e,n){"Error"!==t&&a(!1)};return r.a.createElement(X.a,{open:null!==t,autoHideDuration:6e3,onClose:i},r.a.createElement(_,{onClose:i,severity:"error"},"Error!"))}var et=function(){var t=Object(N.c)((function(t){return t.app.status})),e=Object(N.b)();Object(a.useEffect)((function(){e((function(t){t(D("loading")),W().then((function(e){var n=e.data;t(function(t){return{type:"SET-TODOLISTS",todos:t}}(n)),t(D("succeeded"))}))}))}),[]);var n=Object(a.useCallback)((function(t,n,a){e(function(t,e,n){return function(a,r){var i=r().tasks[n].find((function(e){return e.id===t}));i&&S(n,t,{status:e,deadline:i.deadline,description:i.description,priority:i.priority,title:i.title,startDate:i.startDate}).then((function(r){a(function(t,e,n){return{type:"CHANGE-TASK-STATUS",taskId:t,status:e,todolistId:n}}(t,e,n))}))}}(t,n,a))}),[e]),i=Object(a.useCallback)((function(t,n,a){e(function(t,e,n){return function(a,r){var i=r().tasks[e].find((function(e){return e.id===t}));i&&S(e,t,{status:i.status,deadline:i.deadline,description:i.description,priority:i.priority,title:n,startDate:i.startDate}).then((function(r){a(function(t,e,n){return{type:"CHANGE-TASK-TITLE",taskId:t,title:e,todolistId:n}}(t,n,e))}))}}(t,a,n))}),[e]),c=Object(a.useCallback)((function(t,n){e(function(t,e){return function(n){n(D("loading")),g(t,e).then((function(e){n(function(t,e){return{type:"REMOVE-TASK",taskId:t,todolistId:e}}(t,t)),n(D("succeeded"))}))}}(n,t))}),[e]),o=Object(a.useCallback)((function(t,n){e(function(t,e){return function(n){I(e,t).then((function(t){n({type:"ADD-TASK",task:t.data.data.item})}))}}(t,n))}),[e]),l=Object(a.useCallback)((function(t,n){e(function(t,e){return{todolistId:t,filter:e,type:"CHANGE-TODOLIST-FILTER"}}(t,n))}),[e]),s=Object(a.useCallback)((function(t){e(function(t){return function(e){q(t).then((function(n){e(Q(t))}))}}(t))}),[e]),u=Object(a.useCallback)((function(t,n){e(function(t,e){return function(n){$(t,e).then((function(a){n(function(t,e){return{title:e,type:"CHANGE-TODOLIST-TITLE",todolistId:t}}(t,e))}))}}(t,n))}),[e]),f=Object(a.useCallback)((function(t){e(function(t){return function(e){Y(t).then((function(n){e(Q(t))}))}}(t))}),[e]),m=Object(N.c)((function(t){return t.todoLists})),b=Object(N.c)((function(t){return t.tasks}));return r.a.createElement("div",{className:"App"},r.a.createElement(H.a,{position:"static"},r.a.createElement(P.a,null,r.a.createElement(d.a,{edge:"start",color:"inherit","aria-label":"menu"},r.a.createElement(V.a,null)),r.a.createElement(R.a,{variant:"h6"},"News"),r.a.createElement(O.a,{color:"inherit"},"Login"))),"loading"===t&&r.a.createElement(F.a,{color:"secondary"}),r.a.createElement(G.a,null,r.a.createElement(U.a,{container:!0,style:{padding:"20px"}},r.a.createElement(T,{addItem:f})),r.a.createElement(U.a,{spacing:3,container:!0},m.map((function(t){var e=b[t.id];return r.a.createElement(U.a,{item:!0},r.a.createElement(x.a,{style:{padding:"10px"}},r.a.createElement(K,{changeTaskTitle:i,key:t.id,id:t.id,removeTask:c,title:t.title,tasks:e,changeFilter:l,addTask:o,changeStatus:n,filter:t.filter,removeTodolist:s,changeTodolistTitle:u})))})))),r.a.createElement(tt,null))},nt=n(31),at=n(72),rt=Object(nt.c)({todoLists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE-TODOLIST":return t.filter((function(t){return t.id!==e.id}));case"ADD-TODOLIST":return[{id:e.todolistId,title:e.title,filter:"all"}].concat(Object(A.a)(t));case"CHANGE-TODOLIST-TITLE":var n=Object(A.a)(t),a=n.find((function(t){return t.id===e.todolistId}));return a&&(a.title=e.title),n;case"CHANGE-TODOLIST-FILTER":var r=Object(A.a)(t),i=r.find((function(t){return t.id===e.todolistId}));return i&&(i.filter=e.filter),r;case"SET-TODOLISTS":return e.todos.map((function(t){return Object(y.a)(Object(y.a)({},t),{},{filter:"all"})}));default:return t}},tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE-TASK":var n=Object(y.a)({},t),a=n[e.todolistId],r=a.filter((function(t){return t.id!==e.taskId}));return n[e.todolistId]=r,n;case"ADD-TASK":var i=Object(y.a)({},t),c=i[e.task.todoListId],o=[e.task].concat(Object(A.a)(c));return i[e.task.todoListId]=o,i;case"CHANGE-TASK-STATUS":var l=Object(y.a)({},t),s=t[e.todolistId];return l[e.todolistId]=s.map((function(t){return t.id===e.taskId?Object(y.a)(Object(y.a)({},t),{},{status:e.status}):t})),l;case"CHANGE-TASK-TITLE":var u=Object(y.a)({},t),d=t[e.todolistId];return u[e.todolistId]=d.map((function(t){return t.id===e.taskId?Object(y.a)(Object(y.a)({},t),{},{title:e.title}):t})),u;case"ADD-TODOLIST":var f=Object(y.a)({},t);return f[e.todolistId]=[],f;case"REMOVE-TODOLIST":var m=Object(y.a)({},t);return delete m[e.id],m;case"SET-TODOLISTS":var T=Object(y.a)({},t);return e.todos.forEach((function(t){T[t.id]=[]})),T;case"SET-TASKS":var b=Object(y.a)({},t);return b[e.todolistId]=e.tasks,b;default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"APP/SET-STATUS":return Object(y.a)(Object(y.a)({},t),{},{status:e.status});case"APP/SET-ERROR":return Object(y.a)(Object(y.a)({},t),{},{error:e.error});default:return t}}}),it=Object(nt.d)(rt,Object(nt.a)(at.a));window.store=it,c.a.render(r.a.createElement(N.a,{store:it},r.a.createElement(et,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},83:function(t,e,n){t.exports=n(116)},88:function(t,e,n){},89:function(t,e,n){}},[[83,1,2]]]);
//# sourceMappingURL=main.fa6e1c14.chunk.js.map